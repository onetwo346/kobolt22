<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kobolt - Your Super-Smart Companion</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav>
    <h1>Kobolt</h1>
    <a href="index.html">Back to Intro</a>
  </nav>

  <div class="chat-container">
    <div class="chat-header">
      <h2>Chat with Kobolt</h2>
      <p>Your super-smart companion, ready to answer anything.</p>
    </div>
    <div class="chat-window" id="chat-window">
      <!-- Chat messages will appear here -->
      <div class="bot-message">Kobolt: Hi! Iâ€™m Kobolt, your super-smart companion. Ask me anything! ðŸ˜Š</div>
    </div>
    <div class="chat-input">
      <input type="text" id="user-input" placeholder="Type your message...">
      <button id="send-button">Send</button>
    </div>
  </div>

  <footer>
    Designed by <a href="mailto:cosmoscoderr@gmail.com">Kofi Fosu</a>
  </footer>

  <script>
    // Kobolt's Memory and API Integration
    let memory = {
      userPreferences: {},
      pastConversations: [],
      userMood: 'neutral'
    };

    // Function to add a message to the chat window
    function addMessage(sender, message) {
      const messageElement = document.createElement('div');
      messageElement.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
      messageElement.textContent = `${sender === 'user' ? 'You' : 'Kobolt'}: ${message}`;
      chatWindow.appendChild(messageElement);
      chatWindow.scrollTop = chatWindow.scrollHeight; // Auto-scroll to latest message
    }

    // Function to simulate typing indicator
    function showTypingIndicator() {
      const typingIndicator = document.createElement('div');
      typingIndicator.classList.add('bot-message');
      typingIndicator.textContent = 'Kobolt is typing...';
      chatWindow.appendChild(typingIndicator);
      chatWindow.scrollTop = chatWindow.scrollHeight;
      return typingIndicator;
    }

    // Function to remove typing indicator
    function hideTypingIndicator(typingIndicator) {
      typingIndicator.remove();
    }

    // Function to call an external API (e.g., OpenAI GPT)
    async function callKnowledgeAPI(userMessage) {
      // Replace with your API endpoint and key
      const apiUrl = 'https://api.openai.com/v1/completions';
      const apiKey = 'YOUR_API_KEY_HERE'; // Replace with your actual API key

      const response = await fetch(apiUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          model: 'text-davinci-003', // Use a powerful model
          prompt: userMessage,
          max_tokens: 150
        })
      });

      const data = await response.json();
      return data.choices[0].text.trim();
    }

    // Function to generate a bot response
    async function getBotResponse(userMessage) {
      const lowerCaseMessage = userMessage.toLowerCase();

      // Greetings
      if (lowerCaseMessage.includes('hi') || lowerCaseMessage.includes('hello')) {
        return 'Hello! ðŸ˜Š How can I assist you today?';
      }

      // Use external API for complex questions
      if (lowerCaseMessage.includes('what') || lowerCaseMessage.includes('where') || lowerCaseMessage.includes('how')) {
        const typingIndicator = showTypingIndicator();
        const apiResponse = await callKnowledgeAPI(userMessage);
        hideTypingIndicator(typingIndicator);
        return apiResponse;
      }

      // Default response
      return 'Iâ€™m here to help! Can you tell me more about what youâ€™re looking for?';
    }

    // Event listener for the send button
    sendButton.addEventListener('click', async () => {
      const userMessage = userInput.value.trim();
      if (userMessage) {
        // Display user message
        addMessage('user', userMessage);
        userInput.value = '';

        // Show typing indicator
        const typingIndicator = showTypingIndicator();

        // Simulate bot response after a short delay
        setTimeout(async () => {
          hideTypingIndicator(typingIndicator);
          const botResponse = await getBotResponse(userMessage);
          addMessage('bot', botResponse);
        }, 1500); // Simulate typing delay
      }
    });

    // Event listener for pressing Enter key
    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendButton.click();
      }
    });
  </script>
</body>
</html>
